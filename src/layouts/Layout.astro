---
import "../styles/global.css";
import ScrollToTop from "../components/ScrollToTop.astro";
const { title, description } = Astro.props as {
  title: string;
  description?: string;
};
const desc = description ?? "Fisioterapia e Osteopatia â€” Maia";
---

<!doctype html>
<html lang="pt-PT">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={desc} />

    <meta property="og:title" content={title} />
    <meta property="og:description" content={desc} />
    <meta property="og:type" content="website" />
  </head>

  <body class="bg-brand-wash">
    <slot />
    <ScrollToTop />
    <script is:inline>
      (() => {
        const reveal = () => {
          const els = Array.from(document.querySelectorAll("[data-reveal]"));
          if (!els.length) return;

          // If reduced motion, just show everything
          const reduce = window.matchMedia(
            "(prefers-reduced-motion: reduce)"
          ).matches;
          if (reduce) {
            els.forEach((el) => el.classList.add("is-revealed"));
            return;
          }

          const io = new IntersectionObserver(
            (entries) => {
              for (const entry of entries) {
                if (entry.isIntersecting) {
                  entry.target.classList.add("is-revealed");
                  io.unobserve(entry.target);
                }
              }
            },
            {
              root: null,
              threshold: 0.12,
              rootMargin: "0px 0px -10% 0px",
            }
          );

          els.forEach((el) => io.observe(el));
        };

        // Run now + on Astro client navigations (if you ever enable view transitions)
        reveal();
        document.addEventListener("astro:page-load", reveal);
      })();
    </script>
  </body>
</html>
